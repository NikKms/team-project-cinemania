!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},i=n.parcelRequire8a95;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,n){r[e]=n},n.parcelRequire8a95=i),i("i6wQM"),i("hVzVa");var a=i("bpxeT"),s=i("2TvXO");i("1TFAy"),i("i6wQM");var o,c=i("jyO6b"),l=i("kaqNk"),u=(a=i("bpxeT"),s=i("2TvXO"),{libSelectEl:document.getElementById("js-genre-select"),libMoviesListEl:document.getElementById("js-lib-list"),libLoadMoreBtn:document.getElementById("js-loadMore-btn"),libClearBtn:document.getElementById("clear-lib-btn"),libContainerEL:document.getElementById("lib-container-el")}),d=u.libSelectEl,f=u.libMoviesListEl,p=function(e){return'<option class="option-item" value="'.concat(e.id,'">').concat(e.name,"</option>")},v=(o=e(a)(e(s).mark((function n(t){var r,i,a,o,c,l,u,d,f,p,v;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.title,i=t.name,a=t.release_date,o=t.first_air_date,c=t.genresIds,l=t.poster_path,u=t.vote_average,d=t.id,e.next=3,O(c);case 3:return f=e.sent,p=r||i,v=a||o,null!==l&&"https://image.tmdb.org/t/p/original/".concat(l),e.abrupt("return",'<li class="mylibrary_movie is-id"  data-id='.concat(d,'>\n  <div class="mylibrary_dark">\n  <img src="https://image.tmdb.org/t/p/original').concat(l,'" alt="').concat(p,'" />\n  </div>\n <div class="mylibrary_overlay"></div>\n  <div class="mylibrary_info">\n  <h3 class="mylibrary_movies_name">').concat(p,'</h3>\n  <p class="mylibrary_genre_movie">').concat(f," | ").concat(v.substring(0,4),'</p>\n  </div>\n<div class="hero_star_raiting">\n <span>\n<div class="Stars thisstars" style="--rating: ').concat(u/2,'; " aria-label="Rating of this product is ').concat((u/2).toFixed(1),' out of 5."></div>\n  </div>\n  </span>   \n  </li>'));case 9:case"end":return e.stop()}}),n)}))),function(e){return o.apply(this,arguments)}),m=function(){var n=e(a)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return p(e)})));case 2:r=e.sent,d.insertAdjacentHTML("beforeend",r.join(" "));case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),b=function(){var n=e(a)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return v(e)})));case 2:r=e.sent,f.insertAdjacentHTML("beforeend",r.join(" ")),f.querySelectorAll(".delete-film-btn").forEach((function(e){e.addEventListener("click",H)}));case 6:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h=i("8MBJY"),y=i("a2hTj"),g=i("hKHmD"),w=function(){"use strict";function n(t){var r=t.btnEl,i=t.isHidden,a=void 0!==i&&i;e(h)(this,n),this.button=r,a&&this.hideBtn()}return e(y)(n,[{key:"getBtn",value:function(e){return document.querySelector(e)}},{key:"hideBtn",value:function(){this.button.classList.add(n.classes.hidden)}},{key:"showBtn",value:function(){this.button.classList.remove(n.classes.hidden)}},{key:"disableBtn",value:function(){this.button.disabled=!0,this.button.textContent="Loading..."}},{key:"enableBtn",value:function(){this.button.disabled=!1,this.button.textContent="Load more"}}]),n}();e(g)(w,"classes",{hidden:"lib-btn-hidden"}),i("6JpON");var x=u.libSelectEl,E=u.libMoviesListEl,L=u.libLoadMoreBtn,B=u.libClearBtn,k=u.libContainerEL,_=new w({btnEl:L}),M="1",T=0,I=function(){var n=e(a)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getGenre)();case 2:return r=e.sent.genres,e.abrupt("return",r.filter((function(e){var n=e.id;return t.includes(n)})));case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=e(a)(e(s).mark((function n(t){var r,i;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:return r=e.sent,i=r.map((function(e){return e.name})),e.abrupt("return",i.slice(0,2).join(", "));case 5:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),S=function(){var n=e(a)(e(s).mark((function n(t){var r;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:r=e.sent,m(r);case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),j=function(e){var n=e.slice(T,T+9);T+=9,b(n)},F=function(e){C(e)},C=function(e){if("1"===e)j(l.parsedFilms),q(l.parsedFilms);else{var n=l.parsedFilms.filter((function(n){return n.genresIds.includes(parseInt(e))}));j(n),q(n)}},H=function(e){var n=e.currentTarget.closest(".weekly-card").dataset.id;console.log("filmId: ",n),N(parseInt(n)),window.location.reload()},N=function(e){var n=JSON.parse(localStorage.getItem("films"))||[],t=n.findIndex((function(n){return n.id===e}));console.log("index: ",t),-1!==t&&(n.splice(t,1),localStorage.setItem("films",JSON.stringify(n)))},q=function(e){e.length<=T?_.hideBtn():_.showBtn()},A=function(){E.innerHTML=""},J=function(){k.insertAdjacentHTML("beforeend",'<h2 class="lib-empty-message">OOOPS...<br>We are very sorry!<br>You don\'t have any movies at your library.</h2>\n  <a class="lib-link-search" href="./catalog.html"> Search movie</a>')};x.addEventListener("change",(function(){M=x.value,T=0,A(),F(M)})),window.addEventListener("load",(function(){if(!l.parsedFilms.length)return k.innerHTML="",void J();S(l.parsedFilmsGenreIds),j(l.parsedFilms),q(l.parsedFilms)})),L.addEventListener("click",(function(){_.disableBtn(),F(M),_.enableBtn()})),B.addEventListener("click",(function(){localStorage.removeItem("films"),k.innerHTML="",J()})),i("h8OCG")}();
//# sourceMappingURL=my-lib-page.6ddb682d.js.map
