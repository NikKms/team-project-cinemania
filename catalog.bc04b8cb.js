!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequire8a95;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire8a95=r),r("i6wQM");var o=r("bpxeT"),i=r("2TvXO"),s=(r("bpxeT"),r("2TvXO"),r("bpxeT"),r("8MBJY")),c=r("a2hTj"),u=r("hKHmD"),l=r("8nrFW"),p=(r("2TvXO"),{pagination:document.getElementById("pagination"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate"),btnClear:document.querySelector(".search-clear-btn"),input:document.getElementById("search-form"),btnSearch:document.querySelector(".search-btn")}),d=(o=r("bpxeT"),i=r("2TvXO"),function(e){var t,n=e.map((function(e){return'<li data-id="'.concat(e.id,'" class="catalog-card">\n  <img\n    src="https://image.tmdb.org/t/p/original').concat(e.poster,'"\n    alt="').concat(e.title,'"\n    loading="lazy"\n  />\n  <div class="catalog-overlay"></div>\n  <div class="catalog-info">\n    <h3 class="catalog-info-name">').concat(e.title,'</h3>\n    <div class="catalog-info-date">\n      <p class="catalog-info-details">').concat(e.genres," | ").concat(e.date,'</p>\n      <div\n        class="Stars stars-five"\n        style="--rating: ').concat(e.rating,'"\n        aria-label="Rating of this product is 2.3 out of 5."\n      ></div>\n    </div>\n  </div>\n</li>')})).join("");t=n,p.catalogFilms.innerHTML=t});var g,f=(g=e(o)(e(i).mark((function t(n){var a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:a=e.sent,r=n.map((function(e){var t=e.id,n=e.title,r=e.poster_path,o=e.vote_average,i=e.genre_ids,s=e.release_date;return{id:t,title:n,poster:r,rating:o,genres:v(a,i),date:h(s)}})),d(r);case 5:case"end":return e.stop()}}),t)}))),function(e){return g.apply(this,arguments)}),v=function(e,t){var n=[];return e.map((function(e){var a=e.id,r=e.name;-1!==t.indexOf(a)&&n.push(r)})),n.slice(0,2).join(", ")},h=function(e){return new Date(e).getFullYear()},m=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(e){console.error("Set state error: ",e.message)}},y=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},w=function(){"use strict";function t(n,a,r){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],d=this;e(s)(this,t);var g=this;e(u)(this,"createButton",e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(g.params),!(g.totalPages<=1)){t.next=5;break}return g.reset(),t.abrupt("return");case 5:return g.arrPaginationItems=[],g.addFirstPages(g.arrPaginationItems),g.totalPages>6&&(g.addEllipsisIfNeeded(g.arrPaginationItems),g.addMiddlePages(g.arrPaginationItems),g.addEllipsisIfNeeded(g.arrPaginationItems,!0),g.addLastPage(g.arrPaginationItems)),a=g.createPagination(g.arrPaginationItems.join("")),g.render(a),m("currentPage",g.currentPage),(n=console).log.apply(n,e(l)(g.params)),t.next=14,g.getMovies.apply(g,[g.currentPage].concat(e(l)(g.params)));case 14:console.log(g.totalPages);case 15:case"end":return t.stop()}}),t)})))),e(u)(this,"addFirstPages",(function(e){for(var t=1;t<=Math.min(3,d.totalPages);t++){var n=d.currentPage===t?"btn-active":"",a=d.createPaginationItem("0"+t,n);e.push(a)}})),e(u)(this,"addMiddlePages",(function(e){for(var t=Math.max(4,d.currentPage-2),n=Math.min(d.currentPage+1,d.totalPages-1),a=t;a<=n;a++){var r=d.currentPage===a?"btn-active":"",o=[];o=a<=9?d.createPaginationItem("0"+a,r):d.createPaginationItem(a,r),e.push(o)}})),e(u)(this,"addEllipsisIfNeeded",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(t&&d.currentPage<d.totalPages-2||!t&&d.currentPage>3)&&e.push('<li class="pagination-item ellipsis">...</li>')})),e(u)(this,"addLastPage",(function(e){var t=d.totalPages,n=d.currentPage===t?"btn-active":"",a=d.createPaginationItem(t,n);e.push(a)})),e(u)(this,"createPaginationItem",(function(e,t){return"<li class='pagination-item ".concat(t,"'>\n              <a href='#' data-page='").concat(e,"' class='pagination-btn'>").concat(e,"</a>\n            </li>")})),e(u)(this,"createPagination",(function(e){return"\n      <div class='pagination ".concat(d.totalPages<=1?"pagination-hidden":"","'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev").concat(d.totalPages<=1?"pagination-arrows-hidden":"","'>prev</button>\n        <ul class='pagination-list'>").concat(e,'</ul>\n        <button type="button" class=\'pagination-arrow pagination-arrows-next').concat(d.totalPages<=1?"pagination-arrows-hidden":"","'>next</button>\n      </div>")})),e(u)(this,"render",(function(e){d.reset(),p.catalogFilms.insertAdjacentHTML("afterend",e);var t=document.querySelector(".pagination"),n=document.querySelector(".pagination");t.addEventListener("click",d.handlerBtn),n.addEventListener("click",d.arrowHandler);var a=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===d.currentPage?a.style.display="none":a.style.display="block";var r=document.querySelector(".pagination-arrow.pagination-arrows-next");d.currentPage===d.totalPages?r.style.display="none":r.style.display="block"})),e(u)(this,"arrowHandler",(function(e){var t=e.target;t.classList.contains("pagination-arrows-prev")&&d.prev(),t.classList.contains("pagination-arrows-next")&&d.next()})),e(u)(this,"reset",(function(){var e=document.querySelector(".pagination");e&&e.remove()})),e(u)(this,"prev",(function(){if(1!==d.currentPage){d.currentPage-=1,d.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===d.currentPage?e.style.display="none":e.style.display="block"}})),e(u)(this,"next",(function(){if(d.currentPage!==d.totalPages){d.currentPage+=1,d.createButton();var e=document.querySelector(".pagination-arrow.pagination-arrows-next");d.currentPage===d.totalPages?e.style.display="none":e.style.display="block"}})),e(u)(this,"handlerBtn",(function(e){e.preventDefault();var t=parseInt(e.target.dataset.page);isNaN(t)||(d.currentPage=t,d.createButton())})),console.log(c),this.totalPages=n,this.currentPage=a,this.getMovies=r,this.params=c,this.arrPaginationItems=[]}return e(c)(t,[{key:"updatePage",value:function(e){this.currentPage=e,this.createButton()}}]),t}(),P=r("jyO6b"),b=r("dIxxU"),x=r("3KAdz"),S="88b8a7c5d221d3120fb29d734050dc7d";function k(e){return I.apply(this,arguments)}function I(){return(I=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(0,x.onLoader)(),e.next=4,b.default.get(n);case 4:return a=e.sent,(0,x.removeLoader)(),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),(0,x.removeLoader)(),e.abrupt("return",null);case 14:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var L=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s,c,u,l=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:1,r=l.length>2&&void 0!==l[2]?l[2]:"",p.selectGenres.disabled=!0,p.selectDate.disabled=!1,console.log(n,a,r),e.next=6,(0,P.getByQuery)(n,a,r);case 6:return o=e.sent,s=o.results,c=o.total_pages,u=o.page,f(s),e.abrupt("return",{results:s,total_pages:c,page:u});case 12:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s,c,u=arguments;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:0,p.selectGenres.disabled=!1,p.selectDate.disabled=!0,e.next=5,k("https://api.themoviedb.org/3/movie/now_playing?api_key=".concat(S,"&page=").concat(n).concat(a?"&with_genres=".concat(a):"","&language=en-US"));case 5:return r=e.sent.data,console.log(r),o=r.results,s=r.page,c=r.total_pages,console.log(o),f(o),e.abrupt("return",{results:o,page:s,total_pages:c});case 11:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(S));case 2:return n=e.sent.data,a=n.genres,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=document.querySelector(".search-form"),E=document.querySelector("#selectGenres"),M=document.querySelector("#selectDate"),B=function(){var t=e(o)(e(i).mark((function t(){var n,a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(1);case 2:n=e.sent,a=n.page,r=n.total_pages,new w(r,a,_).createButton();case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=y("searchTerm"),console.log("afterSearching",a),e.next=4,L(a,1);case 4:r=e.sent,o=r.page,s=r.total_pages,new w(s,o,L,[a,o]).createButton(),M.removeAttribute("disabled");case 10:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=e(o)(e(i).mark((function t(){var n,a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:n=e.sent,(a=n.map((function(e){return'<option value="'.concat(e.id,'">').concat(e.name,"</option>")}))).unshift("<option value='all'>All</option>"),E.innerHTML=a.join(""),E.removeAttribute("disabled");case 7:case"end":return e.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,e.next=3,_(1,n.target.value);case 3:r=e.sent,o=r.total_pages,r.results,new w(o,1,_,[a]).createButton();case 8:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=e(o)(e(i).mark((function t(n){var a,r,o,s;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.value,r=y("searchTerm"),e.next=4,L(r,1,a);case 4:o=e.sent,s=o.total_pages,o.page,new w(s,1,L,[r,1,a]).createButton();case 9:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();q.addEventListener("submit",(function(e){e.preventDefault();var t=new FormData(e.target),n=Object.fromEntries(t.entries()).searchMovies;n.length?(m("searchTerm",n),D(n)):B()})),window.addEventListener("load",B),window.addEventListener("load",O),window.addEventListener("load",(function(){for(var e=[],t=(new Date).getFullYear();t>=1970;t--)e.push('<option value="'.concat(t,'">').concat(t,"</option>"));M.innerHTML=e.join("")})),E.addEventListener("change",F),M.addEventListener("change",j),r("i6wQM"),r("hVzVa"),r("h8OCG"),p.btnClear.addEventListener("click",(function(){console.log("hi"),p.input.value=""})),r("3XXFj")}();
//# sourceMappingURL=catalog.bc04b8cb.js.map
