{"mappings":"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","sources":["src/catalog.js","src/partials/js/catalog/example.js","src/partials/js/catalog/catalogApi.js","src/partials/js/catalog/pagination.js","src/partials/js/refs.js","src/partials/js/catalog/createCards.js","src/partials/js/catalog/catalogUtils.js","<<jsx-config-pragma.js>>","src/partials/js/catalog/clearInput.js"],"sourcesContent":["import './partials/js/hero/hero';\nimport './partials/js/catalog/example';\nimport '@fontsource/roboto/400.css';\nimport '@fontsource/roboto/500.css';\nimport '@fontsource/roboto/700.css';\nimport * as hero from './partials/js/hero/hero';\nimport * as modal from './partials/js/modal';\nimport * as catalog from './partials/js/catalog/example';\nimport * as header from './partials/js/header/header';\nimport * as upBtn from './partials/js/up-btn';\nimport * as clear from './partials/js/catalog/clearInput';\nimport * as footer from './partials/js/footer/footer';\n","import { fetchGenre, getMoviesByQuery, showNewestMovies } from './catalogApi';\nimport { createDataCards, loadLocal, saveLocal } from './catalogUtils';\nimport Pagination from './pagination';\n\nconst searchForm = document.querySelector('.search-form');\nconst selectGenres = document.querySelector('#selectGenres');\nconst selectDate = document.querySelector('#selectDate');\n\nconst submitHandler = e => {\n  e.preventDefault();\n  const formData = new FormData(e.target);\n  const { searchMovies } = Object.fromEntries(formData.entries());\n  if (!searchMovies.length) {\n    afterLoad();\n    return;\n  }\n  saveLocal('searchTerm', searchMovies);\n  afterSearching(searchMovies);\n};\n\nconst afterLoad = async () => {\n  const { page, total_pages } = await showNewestMovies(1);\n  const pagination = new Pagination(total_pages, page, showNewestMovies);\n  pagination.createButton();\n};\n\nconst afterSearching = async searchMovies => {\n  const searchTerm = loadLocal('searchTerm');\n  console.log('afterSearching', searchTerm);\n  const { page, total_pages } = await getMoviesByQuery(1, searchTerm);\n\n  const pagination = new Pagination(total_pages, page, getMoviesByQuery, [\n    searchTerm,\n    1,\n  ]);\n  pagination.createButton();\n  selectDate.removeAttribute('disabled');\n};\n\nconst filterSelectOptions = async () => {\n  const genres = await fetchGenre();\n  let arrOptions = genres.map(option => {\n    return `<option value=\"${option.id}\">${option.name}</option>`;\n  });\n  arrOptions.unshift(`<option value='all'>All</option>`);\n  selectGenres.innerHTML = arrOptions.join('');\n  selectGenres.removeAttribute('disabled');\n};\n\nconst setGenreFilter = async e => {\n  const value = e.target.value;\n\n  const { total_pages, results } = await showNewestMovies(1, e.target.value);\n\n  const pagination = new Pagination(total_pages, 1, showNewestMovies, [value]);\n  pagination.createButton();\n};\n\nconst dateSelectOptions = () => {\n  const endDate = 1970;\n  const startDate = new Date().getFullYear();\n\n  const yearList = [];\n\n  for (let i = startDate; i >= endDate; i--) {\n    yearList.push(`<option value=\"${i}\">${i}</option>`);\n  }\n\n  selectDate.innerHTML = yearList.join('');\n};\n\nconst setDateFilter = async e => {\n  const value = e.target.value;\n  const searchTerm = loadLocal('searchTerm');\n\n  const { total_pages, page } = await getMoviesByQuery(1, searchTerm, value);\n\n  const pagination = new Pagination(total_pages, 1, getMoviesByQuery, [\n    searchTerm,\n    value,\n  ]);\n  pagination.createButton();\n};\n\nsearchForm.addEventListener('submit', submitHandler);\nwindow.addEventListener('load', afterLoad);\n\nwindow.addEventListener('load', filterSelectOptions);\nwindow.addEventListener('load', dateSelectOptions);\n\nselectGenres.addEventListener('change', setGenreFilter);\nselectDate.addEventListener('change', setDateFilter);\n\nexport { createDataCards };\n","import Pagination from './pagination';\nimport { getByQuery } from '../api';\nimport { createDataCards, loadLocal } from './catalogUtils';\nimport axios from 'axios';\nimport { refs } from '../refs';\nimport { onLoader, removeLoader } from '../loader';\n\nconst API_KEY = '88b8a7c5d221d3120fb29d734050dc7d';\n\nasync function fetchData(url) {\n  try {\n    onLoader();\n    const data = await axios.get(url);\n    removeLoader();\n    return data;\n  } catch (error) {\n    console.log(error);\n    removeLoader();\n    return null;\n  }\n}\n\nexport const getMoviesByQuery = async (\n  searchTerm,\n  chosenPage = 1,\n  date = ''\n) => {\n  refs.selectGenres.disabled = true;\n  refs.selectDate.disabled = false;\n  console.log(searchTerm, chosenPage, date);\n  const { results, total_pages, page } = await getByQuery(\n    searchTerm,\n    chosenPage,\n    date\n  );\n  createDataCards(results);\n  return {\n    results,\n    total_pages,\n    page,\n  };\n};\n\nexport const showNewestMovies = async (chosenPage, genre_id = 0) => {\n  refs.selectGenres.disabled = false;\n  refs.selectDate.disabled = true;\n\n  const { data } = await fetchData(\n    `https://api.themoviedb.org/3/movie/now_playing?api_key=${API_KEY}&page=${chosenPage}${\n      genre_id ? `&with_genres=${genre_id}` : ''\n    }&language=en-US`\n  );\n  console.log(data);\n  const { results, page, total_pages } = data;\n  console.log(results);\n  createDataCards(results);\n  return {\n    results,\n    page,\n    total_pages,\n  };\n};\n\nexport const fetchGenre = async () => {\n  const { data } = await axios.get(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=${API_KEY}`\n  );\n  const { genres } = data;\n  return genres;\n};\n","import { refs } from '../refs';\nimport { saveLocal } from './catalogUtils';\n\nexport default class Pagination {\n  constructor(totalPages, page, getMovies, params = []) {\n    console.log(params);\n    this.totalPages = totalPages;\n    this.currentPage = page;\n    this.getMovies = getMovies;\n    this.params = params;\n    this.arrPaginationItems = [];\n  }\n\n  createButton = async () => {\n    console.log(this.params);\n    if (this.totalPages <= 1) {\n      this.reset();\n      return;\n    }\n\n    this.arrPaginationItems = [];\n\n    this.addFirstPages(this.arrPaginationItems);\n    if (this.totalPages > 6) {\n      this.addEllipsisIfNeeded(this.arrPaginationItems);\n      this.addMiddlePages(this.arrPaginationItems);\n      this.addEllipsisIfNeeded(this.arrPaginationItems, true);\n      this.addLastPage(this.arrPaginationItems);\n    }\n\n    const markup = this.createPagination(this.arrPaginationItems.join(''));\n    this.render(markup);\n    saveLocal('currentPage', this.currentPage);\n  };\n\n  addFirstPages = arr => {\n    for (let page = 1; page <= Math.min(3, this.totalPages); page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      const btn = this.createPaginationItem('0' + page, activeEl);\n      arr.push(btn);\n    }\n  };\n\n  addMiddlePages = arr => {\n    const startPage = Math.max(4, this.currentPage - 2);\n    const endPage = Math.min(this.currentPage + 1, this.totalPages - 1);\n    for (let page = startPage; page <= endPage; page++) {\n      const activeEl = this.currentPage === page ? 'btn-active' : '';\n      let btn = [];\n      if (page <= 9) {\n        btn = this.createPaginationItem('0' + page, activeEl);\n      } else {\n        btn = this.createPaginationItem(page, activeEl);\n      }\n      arr.push(btn);\n    }\n  };\n\n  addEllipsisIfNeeded = (arr, atEnd = false) => {\n    if (\n      (atEnd && this.currentPage < this.totalPages - 2) ||\n      (!atEnd && this.currentPage > 3)\n    ) {\n      arr.push('<li class=\"pagination-item ellipsis\">...</li>');\n    }\n  };\n\n  addLastPage = arr => {\n    const lastPage = this.totalPages;\n    const activeEl = this.currentPage === lastPage ? 'btn-active' : '';\n    const btn = this.createPaginationItem(lastPage, activeEl);\n    arr.push(btn);\n  };\n\n  createPaginationItem = (page, activeClass) => {\n    return `<li class='pagination-item ${activeClass}'>\n              <a href='#' data-page='${page}' class='pagination-btn'>${page}</a>\n            </li>`;\n  };\n\n  createPagination = paginationItems => {\n    const paginationContainer = `\n      <div class='pagination ${\n        this.totalPages <= 1 ? 'pagination-hidden' : ''\n      }'>\n      <button type=\"button\" class='pagination-arrow pagination-arrows-prev${\n        this.totalPages <= 1 ? 'pagination-arrows-hidden' : ''\n      }'>prev</button>\n        <ul class='pagination-list'>${paginationItems}</ul>\n        <button type=\"button\" class='pagination-arrow pagination-arrows-next${\n          this.totalPages <= 1 ? 'pagination-arrows-hidden' : ''\n        }'>next</button>\n      </div>`;\n    return paginationContainer;\n  };\n\n  render = pagination => {\n    this.reset();\n    refs.catalogFilms.insertAdjacentHTML('afterend', pagination);\n    const el = document.querySelector('.pagination');\n    const paginationContainer = document.querySelector('.pagination');\n\n    el.addEventListener('click', this.handlerBtn);\n    paginationContainer.addEventListener('click', this.arrowHandler);\n\n    const prevButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-prev'\n    );\n    if (this.currentPage === 1) {\n      prevButton.style.display = 'none';\n    } else {\n      prevButton.style.display = 'block';\n    }\n\n    const nextButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-next'\n    );\n    if (this.currentPage === this.totalPages) {\n      nextButton.style.display = 'none';\n    } else {\n      nextButton.style.display = 'block';\n    }\n  };\n\n  arrowHandler = e => {\n    const targetEl = e.target;\n\n    if (targetEl.classList.contains('pagination-arrows-prev')) {\n      this.prev();\n    }\n    if (targetEl.classList.contains('pagination-arrows-next')) {\n      this.next();\n    }\n  };\n\n  reset = () => {\n    const el = document.querySelector('.pagination');\n    if (el) el.remove();\n  };\n\n  prev = () => {\n    if (this.currentPage === 1) return;\n    this.currentPage -= 1;\n    this.createButton();\n\n    const prevButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-prev'\n    );\n    if (this.currentPage === 1) {\n      prevButton.style.display = 'none';\n    } else {\n      prevButton.style.display = 'block';\n    }\n  };\n\n  next = () => {\n    if (this.currentPage === this.totalPages) return;\n    this.currentPage += 1;\n    this.createButton();\n\n    const nextButton = document.querySelector(\n      '.pagination-arrow.pagination-arrows-next'\n    );\n    if (this.currentPage === this.totalPages) {\n      nextButton.style.display = 'none';\n    } else {\n      nextButton.style.display = 'block';\n    }\n  };\n\n  updatePage(page) {\n    this.currentPage = page;\n    this.createButton();\n  }\n\n  handlerBtn = async e => {\n    e.preventDefault();\n    const page = parseInt(e.target.dataset.page);\n    if (!isNaN(page)) {\n      this.currentPage = page;\n      this.createButton();\n\n      await this.getMovies(this.currentPage, ...this.params);\n    }\n  };\n}\n","const refs = {\n  pagination: document.getElementById('pagination'),\n  //_______Catalog_______\n  catalogFilms: document.querySelector('.catalog-films'),\n  searchForm: document.querySelector('.search-form'),\n  selectGenres: document.querySelector('#selectGenres'),\n  selectDate: document.querySelector('#selectDate'),\n  btnClear: document.querySelector('.search-clear-btn'),\n  input: document.getElementById('search-form'),\n  btnSearch: document.querySelector('.search-btn'),\n  //____________________\n};\n\nexport { refs };\n","import { refs } from '../refs';\n\nexport const createCards = dataCard => {\n  const errorModule = document.querySelector('.no-movie-found');\n  if (errorModule !== null) errorModule.remove();\n  const markup = dataCard\n    .map(card => {\n      return `<li data-id=\"${card.id}\" class=\"catalog-card is-id\">\n  <img\n    src=\"https://image.tmdb.org/t/p/original${card.poster}\"\n    alt=\"${card.title}\"\n    loading=\"lazy\"\n  />\n  <div class=\"catalog-overlay\"></div>\n  <div class=\"catalog-info\">\n    <h3 class=\"catalog-info-name\">${card.title}</h3>\n    <div class=\"catalog-info-date\">\n      <p class=\"catalog-info-details\">${card.genres} | ${card.date}</p>\n      <div\n        class=\"Stars stars-five\"\n        style=\"--rating: ${card.rating}\"\n        aria-label=\"Rating of this product is 2.3 out of 5.\"\n      ></div>\n    </div>\n  </div>\n</li>`;\n    })\n    .join('');\n  if (!markup.length) {\n    const errorMarkup = createSearchErrors();\n    console.log(errorMarkup);\n    refs.catalogFilms.insertAdjacentHTML('beforebegin', errorMarkup);\n    refs.catalogFilms.innerHTML = '';\n    return;\n  }\n  addHTML(markup);\n};\n\nconst createSearchErrors = () => {\n  const markupErrors = `<div class=\"no-movie-found\">\n    <p class=\"no-movie-found__text\">\n      <span class=\"no-movie-found__text-item\">OOPS...</span>\n      <span class=\"no-movie-found__text-item\">We are very sorry!</span>\n      <span class=\"no-movie-found__text-item\">\n        We donâ€™t have any results matching your search.\n      </span>\n    </p>\n  </div>`;\n\n  return markupErrors;\n};\n\nfunction addHTML(cards) {\n  refs.catalogFilms.innerHTML = cards;\n}\n","import { fetchGenre } from './catalogApi';\nimport { createCards } from './createCards';\n\nconst createDataCards = async moviesData => {\n  const genre = await fetchGenre();\n  const newCardsDate = moviesData.map(\n    ({ id, title, poster_path, vote_average, genre_ids, release_date }) => {\n      return {\n        id: id,\n        title: title,\n        poster: poster_path,\n        rating: vote_average,\n        genres: createGenreStr(genre, genre_ids),\n        date: createMovieDate(release_date),\n      };\n    }\n  );\n  createCards(newCardsDate);\n};\n\nconst createGenreStr = (genre, genre_ids) => {\n  const genres = [];\n  genre.map(({ id, name }) => {\n    if (genre_ids.indexOf(id) !== -1) {\n      genres.push(name);\n    }\n  });\n  return genres.slice(0, 2).join(', ');\n  //return genres.join('');\n};\n\nconst createMovieDate = dateString => {\n  const date = new Date(dateString);\n  const year = date.getFullYear();\n  return year;\n};\n\nconst saveLocal = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst loadLocal = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nexport {\n  createDataCards,\n  createGenreStr,\n  createMovieDate,\n  saveLocal,\n  loadLocal,\n};\n",null,"import { refs } from '../refs';\n\nrefs.btnClear.addEventListener('click', () => {\n  console.log('hi');\n  refs.input.value = '';\n});\n"],"names":["parcelRequire","$bpxeT","$5f0c02a003d98366$export$21666b427502ea6d","pagination","document","getElementById","catalogFilms","querySelector","searchForm","selectGenres","selectDate","btnClear","input","btnSearch","$66edc2a1388134fa$export$659b6b545718ce73","dataCard","errorModule","remove","cards","markup","map","card","concat","id","poster","title","genres","date","rating","join","length","errorMarkup","$66edc2a1388134fa$var$createSearchErrors","console","log","insertAdjacentHTML","innerHTML","$1fe4b2be6ef53714$export$f3fd225445632348","$parcel$interopDefault","$2TvXO","mark","_callee","moviesData","genre","newCardsDate","$fe622946adcb22aa$export$13a873f6c4b5d516","_ctx","sent","param","poster_path","vote_average","genre_ids","release_date","$1fe4b2be6ef53714$export$44f0485a2f926b66","$1fe4b2be6ef53714$export$e57ec8acbf34a811","name","indexOf","push","slice","dateString","Date","getFullYear","$1fe4b2be6ef53714$export$b38f1b11c5e38f18","key","value","serializedState","JSON","stringify","localStorage","setItem","error","message","$1fe4b2be6ef53714$export$9f183916f445c495","getItem","undefined","parse","$eca5539537a6497d$export$2e2bcd8739ae039","Pagination","totalPages","page1","getMovies","params","arguments","$hKHmD","this","_this1","reset","arrPaginationItems","addFirstPages","addEllipsisIfNeeded","addMiddlePages","addLastPage","createPagination","render","currentPage","arr","_$page","Math","min","_this","activeEl","btn","createPaginationItem","startPage","max","endPage","atEnd","lastPage","page","activeClass","paginationItems","el","paginationContainer","addEventListener","handlerBtn","arrowHandler","prevButton","style","display","nextButton","e","targetEl","target","classList","contains","prev","next","createButton","preventDefault","parseInt","dataset","isNaN","_this2","apply","$8nrFW","$fe622946adcb22aa$var$API_KEY","$fe622946adcb22aa$var$fetchData","url","$fe622946adcb22aa$var$_fetchData","data","$3KAdz","onLoader","$dIxxU","default","get","removeLoader","t0","$fe622946adcb22aa$export$4a3145eab4db56d2","searchTerm","chosenPage","ref","results","total_pages","_args","disabled","$jyO6b","getByQuery","$fe622946adcb22aa$export$49f9e704d857526c","genre_id","$bfa640fc158a0d39$var$searchForm","$bfa640fc158a0d39$var$selectGenres","$bfa640fc158a0d39$var$selectDate","$bfa640fc158a0d39$var$afterLoad","$bfa640fc158a0d39$var$afterSearching","searchMovies","removeAttribute","$bfa640fc158a0d39$var$filterSelectOptions","arrOptions","option","unshift","$bfa640fc158a0d39$var$setGenreFilter","$bfa640fc158a0d39$var$setDateFilter","formData","FormData","Object","fromEntries","entries","window","yearList","i"],"version":3,"file":"catalog.0915766e.js.map"}