!function(){function n(n){return n&&n.__esModule?n.default:n}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},r=e.parcelRequire8a95;null==r&&((r=function(n){if(n in t)return t[n].exports;if(n in a){var e=a[n];delete a[n];var r={id:n,exports:{}};return t[n]=r,e.call(r.exports,r,r.exports),r.exports}var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(n,e){a[n]=e},e.parcelRequire8a95=r),r("i6wQM");var c=r("bpxeT"),o=r("2TvXO"),s=(c=r("bpxeT"),o=r("2TvXO"),r("jyO6b")),i={openModal:document.querySelector("[data-modal-open]"),closeModal:document.querySelector("[data-modal-close]"),backdrop:document.querySelector("[data-modal]")};function d(){window.removeEventListener("keydown",p),i.backdrop.classList.add("is-hidden")}function p(n){"Escape"===n.code&&d()}function u(){return(u=n(c)(n(o).mark((function e(t){var a;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.getInfoByMovie)(t);case 2:a=n.sent,console.log(a);case 4:case"end":return n.stop()}}),e)})))).apply(this,arguments)}i.openModal.addEventListener("click",(function(n){(function(n){u.apply(this,arguments)})(n.target.closest("Li").dataset.id),window.addEventListener("keydown",p),i.backdrop.classList.remove("is-hidden")})),i.closeModal.addEventListener("click",d),i.backdrop.addEventListener("click",(function(n){n.currentTarget===n.target&&d()}));s=r("jyO6b"),s=r("jyO6b"),s=r("jyO6b");var l=document.querySelector(".weekly-cards-wrap"),v=document.querySelector(".upcoming_wrap");function f(){return(f=n(c)(n(o).mark((function e(){var t;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.getWeeklyTrending)();case 2:t=n.sent,m(g(t.results));case 5:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function g(n){return n.slice(0,3)}function m(n){return w.apply(this,arguments)}function w(){return w=n(c)(n(o).mark((function e(t){var a;return n(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=n(c)(n(o).mark((function e(t){var a,r,c,s,i,d;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.backdrop_path,a=t.title,r=t.release_date,c=t.genre_ids,s=t.id,i=t.poster_path,n.next=3,y(c);case 3:return d=n.sent,console.log(d),n.abrupt("return",'<li class="weekly-card" data-id='.concat(s,'>\n        <div class="weekly-container-image">\n          <img\n            class="weekly-card-image"\n           src="https://image.tmdb.org/t/p/original/').concat(i,'"\n            alt=""\n          />\n         <div class="overlay"></div>       \n        </div>\n        <div class="weekly-card-description">\n          <span class="weekly-card-description-title">').concat(a,'</span>\n          <span class="weekly-card-description-other">').concat(d," | ").concat(r.slice(0,4),'</span>\n        </div>\n        <div class="weekly-card-raiting">Stars5*</div>\n      </li>'));case 6:case"end":return n.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:a=e.sent,l.innerHTML=a.join("");case 4:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function y(n){return h.apply(this,arguments)}function h(){return(h=n(c)(n(o).mark((function e(t){var a,r,c;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,s.getGenre)();case 2:return a=n.sent,r=a.genres,c=t.map((function(n){var e=r.find((function(e){return e.id===n}));return e?e.name:""})),n.abrupt("return",c.join(", "));case 6:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=n(c)(n(o).mark((function e(){var t,a,r,c;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=L(),a=t.formattedStartDate,r=t.formattedEndDate,n.prev=1,n.next=4,(0,s.getUpcoming)(a,r);case 4:c=n.sent,k(M(c.results)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0.message);case 12:case"end":return n.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function k(n){return x.apply(this,arguments)}function x(){return(x=n(c)(n(o).mark((function e(t){var a,r,c,s,i,d,p,u,l,f;return n(o).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),a=t.backdrop_path,r=t.genre_ids,c=t.popularity,s=t.release_date,i=t.title,d=t.vote_average,p=t.vote_count,u=t.overview,n.next=4,y(r);case 4:l=n.sent,f='<div class="upcoming-card">\n\n            <img class="upcoming-card-img" src="https://image.tmdb.org/t/p/original/'.concat(a,'" alt=" " />\n\n          <div class="upcoming-card-wrap">\n            <h3 class="upcoming-card-title">').concat(i,'</h3>\n\n            <div class="upcoming-card-numbers-wrap-top">\n              <div class="upcoming-card-release-wrap">\n                <span class="upcoming-card-release-text">Release date</span>\n                <span class="upcoming-card-release-data">').concat(s,'</span>\n              </div>\n\n              <div class="upcoming-card-vote-wrap">\n                <div class="upcoming-card-vote"><span>Vote / Votes</span></div>\n                <div class="upcoming-card-vote-data">\n                  <span>').concat(d,"</span> / <span>").concat(p,'</span>\n                </div>\n              </div>\n            </div>\n\n            <div class="upcoming-card-numbers-wrap-down">\n              <div class="upcoming-card-popularity-wrap">\n                <span class="upcoming-card-popularity-text">Popularity</span>\n                <span class="upcoming-card-popularity-data">').concat(c.toFixed(1),'</span>\n              </div>\n\n              <div class="upcoming-card-genre-wrap">\n                <span class="upcoming-card-genre-text">Genre</span>\n                <span class="upcoming-card-genre-data">').concat(l,'</span>\n              </div>\n            </div>\n\n            <span class="upcoming-card-about-title">About</span>\n\n            <p class="upcoming-card-about-text">').concat(u,'</p>\n\n            <button class="upcoming-button" type="button">\n              Add to my library\n            </button>\n          </div>\n        </div>'),v.insertAdjacentHTML("beforeend",f);case 7:case"end":return n.stop()}}),e)})))).apply(this,arguments)}function L(){var n=new Date,e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0"),r="".concat(e,"-").concat(t,"-").concat(a),c=new Date(e,t,1),o=new Date(c-1).getDate(),s=String(o).padStart(2,"0");return{formattedStartDate:r,formattedEndDate:"".concat(e,"-").concat(t,"-").concat(s)}}function M(n){return n[Math.floor(Math.random()*n.length)]}document.querySelector(".weekly-title-link").addEventListener("click",(function(){location.href="catalog.html"})),window.addEventListener("DOMContentLoaded",(function(){return b.apply(this,arguments)})),window.addEventListener("DOMContentLoaded",(function(){return f.apply(this,arguments)}))}();
//# sourceMappingURL=index.7ae96429.js.map
