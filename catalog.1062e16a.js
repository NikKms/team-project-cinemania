function t(t,e,a,n){Object.defineProperty(t,e,{get:a,set:n,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},s=a.parcelRequire8a95;null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){i[t]=e},a.parcelRequire8a95=s),s.register("kyEFX",(function(e,a){var n,i;t(e.exports,"register",(function(){return n}),(function(t){return n=t})),t(e.exports,"resolve",(function(){return i}),(function(t){return i=t}));var s={};n=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)s[e[a]]=t[e[a]]},i=function(t){var e=s[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("kyEFX").register(JSON.parse('{"9NLH0":"catalog.1062e16a.js","lp5u4":"sprite.486e8ae6.svg","cUNoC":"catalog.e6872f05.css","5b0U0":"my-lib-page.506f8212.js"}')),s("g7hbw");const r={pagination:document.getElementById("pagination"),catalogSection:document.querySelector(".catalog"),catalogFilms:document.querySelector(".catalog-films"),searchForm:document.querySelector(".search-form"),selectGenres:document.querySelector("#selectGenres"),selectDate:document.querySelector("#selectDate"),btnClear:document.querySelector(".search-clear-btn"),input:document.getElementById("search-form"),btnSearch:document.querySelector(".search-btn"),inputIcon:document.querySelector(".input-icon")};var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a;return t};const c=t=>{const e=document.querySelector(".no-movie-found");null!==e&&e.remove();const a=t.map((t=>`<li data-id="${t.id}" class="catalog-card is-id">\n  <img\n    src="https://image.tmdb.org/t/p/original${t.poster}"\n    alt="${t.title}"\n    loading="lazy"\n  />\n  <div class="catalog-overlay"></div>\n  <div class="catalog-info">\n    <h3 class="catalog-info-name">${t.title}</h3>\n    <div class="catalog-info-date">\n      <p class="catalog-info-details">${t.genres} | ${t.date}</p>\n      <div\n        class="Stars stars-five"\n        style="--rating: ${t.rating}"\n        aria-label="Rating of this product is 2.3 out of 5."\n      ></div>\n    </div>\n  </div>\n</li>`)).join("");if(!a.length){const t=l();return r.catalogFilms.insertAdjacentHTML("beforebegin",t),void(r.catalogFilms.innerHTML="")}var n;n=a,r.catalogFilms.innerHTML=n},l=()=>'<div class="no-movie-found">\n    <p class="no-movie-found__text">\n      <span class="no-movie-found__text-item">OOPS...</span>\n      <span class="no-movie-found__text-item">We are very sorry!</span>\n      <span class="no-movie-found__text-item">\n        We donâ€™t have any results matching your search.\n      </span>\n    </p>\n  </div>';const d=async t=>{const e=await S(),a=t.map((({id:t,title:a,poster_path:n,vote_average:i,genre_ids:s,release_date:r})=>({id:t,title:a,poster:n,rating:i,genres:g(e,s),date:u(r)})));c(a)},g=(t,e)=>{const a=[];return t.map((({id:t,name:n})=>{-1!==e.indexOf(t)&&a.push(n)})),a.slice(0,2).join(", ")},u=t=>new Date(t).getFullYear(),p=(t,e)=>{try{const a=JSON.stringify(e);localStorage.setItem(t,a)}catch(t){console.error("Set state error: ",t.message)}},h=t=>{try{const e=localStorage.getItem(t);return null===e?void 0:JSON.parse(e)}catch(t){console.error("Get state error: ",t.message)}};var m;m=new URL(s("kyEFX").resolve("lp5u4"),import.meta.url).toString();class v{updatePage(t){this.currentPage=t,this.createButton()}constructor({totalPages:t,page:a,parentSection:n},i,s=[]){e(o)(this,"createButton",(async()=>{if(this.totalPages<=1)return void this.reset();this.arrPaginationItems=[],this.addFirstPages(this.arrPaginationItems),this.totalPages>6&&(this.addEllipsisIfNeeded(this.arrPaginationItems),this.addMiddlePages(this.arrPaginationItems),this.addEllipsisIfNeeded(this.arrPaginationItems,!0),this.addLastPage(this.arrPaginationItems));const t=this.createPagination(this.arrPaginationItems.join(""));this.render(t),p("currentPage",this.currentPage)})),e(o)(this,"addFirstPages",(t=>{for(let e=1;e<=Math.min(3,this.totalPages);e++){const a=this.currentPage===e?"btn-active":"",n=this.createPaginationItem("0"+e,a);t.push(n)}})),e(o)(this,"addMiddlePages",(t=>{const e=Math.max(4,this.currentPage-2),a=Math.min(this.currentPage+1,this.totalPages-1);for(let n=e;n<=a;n++){const e=this.currentPage===n?"btn-active":"";let a=[];a=n<=9?this.createPaginationItem("0"+n,e):this.createPaginationItem(n,e),t.push(a)}})),e(o)(this,"addEllipsisIfNeeded",((t,e=!1)=>{(e&&this.currentPage<this.totalPages-2||!e&&this.currentPage>3)&&t.push('<li class="pagination-item ellipsis">...</li>')})),e(o)(this,"addLastPage",(t=>{const e=this.totalPages,a=this.currentPage===e?"btn-active":"",n=this.createPaginationItem(e,a);t.push(n)})),e(o)(this,"createPaginationItem",((t,e)=>`<li class='pagination-item ${e}'>\n              <a href='#' data-page='${t}' class='pagination-btn'>${t}</a>\n            </li>`)),e(o)(this,"createPagination",(t=>`\n      <div class='pagination ${this.totalPages<=1?"pagination-hidden":""}'>\n      <button type="button" class='pagination-arrow pagination-arrows-prev${this.totalPages<=1?"pagination-arrows-hidden":""}'><svg class="icon" width="32" height="32">\n      <use href="${e(m)}#icon-arrow-prev"></use>\n    </svg></button>\n        <ul class='pagination-list'>${t}</ul>\n        <button type="button" class='pagination-arrow pagination-arrows-next${this.totalPages<=1?"pagination-arrows-hidden":""}'><svg class="icon" width="32" height="32">\n        <use href="${e(m)}#icon-arrow-next"></use>\n      </svg></button>\n      </div>`)),e(o)(this,"render",(t=>{this.reset(),r.catalogFilms.insertAdjacentHTML("afterend",t);const e=document.querySelector(".pagination"),a=document.querySelector(".pagination");e.addEventListener("click",this.handlerBtn),a.addEventListener("click",this.arrowHandler);const n=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===this.currentPage?n.style.display="none":n.style.display="block";const i=document.querySelector(".pagination-arrow.pagination-arrows-next");this.currentPage===this.totalPages?i.style.display="none":i.style.display="block"})),e(o)(this,"arrowHandler",(t=>{const e=t.target;e.classList.contains("pagination-arrows-prev")&&this.prev(),e.classList.contains("pagination-arrows-next")&&this.next()})),e(o)(this,"reset",(()=>{const t=document.querySelector(".pagination");t&&t.remove()})),e(o)(this,"scrollToTop",(()=>{void 0!==this.parentSection&&this.parentSection.scrollIntoView({behavior:"instant"})})),e(o)(this,"prev",(async()=>{if(1===this.currentPage)return;this.currentPage-=1,this.createButton(),await this.getMovies(this.currentPage,...this.params),this.scrollToTop();const t=document.querySelector(".pagination-arrow.pagination-arrows-prev");1===this.currentPage?t.style.display="none":t.style.display="block"})),e(o)(this,"next",(async()=>{if(this.currentPage===this.totalPages)return;this.currentPage+=1,this.createButton(),await this.getMovies(this.currentPage,...this.params),this.scrollToTop();const t=document.querySelector(".pagination-arrow.pagination-arrows-next");this.currentPage===this.totalPages?t.style.display="none":t.style.display="block"})),e(o)(this,"handlerBtn",(async t=>{t.preventDefault();const e=parseInt(t.target.dataset.page);isNaN(e)||(this.currentPage=e,this.createButton(),await this.getMovies(this.currentPage,...this.params),this.scrollToTop())})),this.totalPages=t,this.currentPage=a,this.parentSection=n,this.getMovies=i,this.params=s,this.arrPaginationItems=[]}}var f=s("19F3f"),y=s("2shzp"),P=s("kHmXk");const w=async(t,e=1,a="")=>{r.selectGenres.disabled=!0,r.selectDate.disabled=!1;const{results:n,total_pages:i,page:s}=await(0,f.getByQuery)(t,e,a);return d(n),{results:n,total_pages:i,page:s}},b=async(t,e=0)=>{r.selectGenres.disabled=!1,r.selectDate.disabled=!0;const{data:a}=await async function(t){try{(0,P.onLoader)();const e=await y.default.get(t);return(0,P.removeLoader)(),e}catch(t){return(0,P.removeLoader)(),null}}(`https://api.themoviedb.org/3/movie/now_playing?api_key=88b8a7c5d221d3120fb29d734050dc7d&page=${t}${e?`&with_genres=${e}`:""}&language=en-US`),{results:n,page:i,total_pages:s}=a;return d(n),{results:n,page:i,total_pages:s}},S=async()=>{const{data:t}=await y.default.get("https://api.themoviedb.org/3/genre/movie/list?api_key=88b8a7c5d221d3120fb29d734050dc7d"),{genres:e}=t;return e},_=document.querySelector(".search-form"),L=document.querySelector("#selectGenres"),E=document.querySelector("#selectDate"),I=async()=>{const{page:t,total_pages:e}=await b(1);new v({totalPages:e,page:t,parentSection:r.catalogSection},b).createButton()},$=async t=>{const e=h("searchTerm"),{page:a,total_pages:n}=await w(1,e);new v({totalPages:n,page:a,parentSection:r.catalogSection},w,[e,1]).createButton(),E.removeAttribute("disabled")};_.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData(t.target),{searchMovies:a}=Object.fromEntries(e.entries());a.length?(p("searchTerm",a),$(a)):I()})),window.addEventListener("load",I),window.addEventListener("load",(async()=>{let t=(await S()).map((t=>`<option value="${t.id}">${t.name}</option>`));t.unshift("<option value='all'>All</option>"),L.innerHTML=t.join(""),L.removeAttribute("disabled")})),window.addEventListener("load",(()=>{const t=[];for(let e=(new Date).getFullYear();e>=1970;e--)t.push(`<option value="${e}">${e}</option>`);E.innerHTML=t.join("")})),L.addEventListener("change",(async t=>{const e=t.target.value,{total_pages:a}=await b(1,t.target.value);new v({totalPages:a,page:1,parentSection:r.catalogSection},b,[e]).createButton()})),E.addEventListener("change",(async t=>{const e=t.target.value,a=h("searchTerm"),{total_pages:n}=await w(1,a,e);new v({totalPages:n,page:1,parentSection:r.catalogSection},w,[a,e]).createButton()})),_.querySelector("input").addEventListener("input",(t=>{const e=t.target.value;L.disabled=!0,e.length||(L.disabled=!1)})),s("g7hbw"),s("70ClL"),s("7Yg6P"),s("2tESM"),r.btnClear.addEventListener("click",(()=>{r.input.value=""})),r.input.addEventListener("input",(()=>{""===r.input.value?r.inputIcon.classList.add("icon-hidden"):r.inputIcon.classList.remove("icon-hidden")})),s("hwTRf");
//# sourceMappingURL=catalog.1062e16a.js.map
