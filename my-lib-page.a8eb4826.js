function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},s=t.parcelRequire8a95;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){i[e]=t},t.parcelRequire8a95=s),s("g7hbw"),s("7Yg6P"),s("70ClL"),s("g7hbw");var l=s("19F3f"),a=s("cl7Eh");const r={libSelectEl:document.getElementById("js-genre-select"),libMoviesListEl:document.getElementById("js-lib-list"),libLoadMoreBtn:document.getElementById("js-loadMore-btn"),libClearBtn:document.getElementById("clear-lib-btn"),libContainerEL:document.getElementById("lib-container-el")},{libSelectEl:o,libMoviesListEl:d}=r,c=async e=>{const t=await Promise.all(e.map((e=>(e=>`<option class="option-item" value="${e.id}">${e.name}</option>`)(e))));o.insertAdjacentHTML("beforeend",t.join(" "))},b=async e=>{const t=await Promise.all(e.map((e=>(async({title:e,name:t,release_date:n,first_air_date:i,genresIds:s,poster_path:l,vote_average:a,id:r})=>{const o=e||t;let d;return d=null!==l?`https://image.tmdb.org/t/p/original/${l}`:"https://d2ths1nqi4sbhh.cloudfront.net/images/no-image.png?v=3884857787",`<li class="mylibrary_movie is-id"  data-id=${r}>\n  <div class="mylibrary_dark">\n  <img src="https://image.tmdb.org/t/p/original${l}" alt="${o}" />\n  </div>\n <div class="mylibrary_overlay"></div>\n  <div class="mylibrary_info">\n  <h3 class="mylibrary_movies_name">${o}</h3>\n  <p class="mylibrary_genre_movie">${await _(s)} | ${(n||i).substring(0,4)}</p>\n  </div>\n<div class="hero_star_raiting">\n <span>\n<div class="Stars thisstars" style="--rating: ${a/2}; " aria-label="Rating of this product is ${(a/2).toFixed(1)} out of 5."></div>\n  </div>\n  </span>   \n  </li>`})(e))));d.insertAdjacentHTML("beforeend",t.join(" "));d.querySelectorAll(".delete-film-btn").forEach((e=>{e.addEventListener("click",j)}))};var m={};Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e};class u{getBtn(e){return document.querySelector(e)}hideBtn(){this.button.classList.add(u.classes.hidden)}showBtn(){this.button.classList.remove(u.classes.hidden)}disableBtn(){this.button.disabled=!0,this.button.textContent="Loading..."}enableBtn(){this.button.disabled=!1,this.button.textContent="Load more"}constructor({btnEl:e,isHidden:t=!1}){this.button=e,t&&this.hideBtn()}}e(m)(u,"classes",{hidden:"lib-btn-hidden"}),s("7Y9D8");const{libSelectEl:g,libMoviesListEl:h,libLoadMoreBtn:f,libClearBtn:p,libContainerEL:v}=r,y=new u({btnEl:f});let E="1";let w=0;const L=async e=>{const{genres:t}=await(0,l.getGenre)();return t.filter((({id:t})=>e.includes(t)))},_=async e=>(await L(e)).map((({name:e})=>e)).slice(0,2).join(", "),B=async e=>{const t=await L(e);c(t)},M=e=>{const t=e.slice(w,w+9);w+=9,b(t)},I=e=>{S(e)},S=e=>{if("1"===e)M(a.parsedFilms),$(a.parsedFilms);else{const t=a.parsedFilms.filter((t=>t.genresIds.includes(parseInt(e))));M(t),$(t)}},j=e=>{const t=e.currentTarget.closest(".weekly-card").dataset.id;console.log("filmId: ",t),T(parseInt(t)),window.location.reload()},T=e=>{const t=JSON.parse(localStorage.getItem("films"))||[],n=t.findIndex((t=>t.id===e));console.log("index: ",n),-1!==n&&(t.splice(n,1),localStorage.setItem("films",JSON.stringify(t)))},$=e=>{e.length<=w?y.hideBtn():y.showBtn()},x=()=>{h.innerHTML=""},F=()=>{v.insertAdjacentHTML("beforeend",'<h2 class="lib-empty-message">OOOPS...<br>We are very sorry!<br>You don\'t have any movies at your library.</h2>\n  <a class="lib-link-search" href="./catalog.html"> Search movie</a>')};g.addEventListener("change",(()=>{E=g.value,w=0,x(),I(E)})),window.addEventListener("load",(()=>{if(!a.parsedFilms.length)return v.innerHTML="",void F();B(a.parsedFilmsGenreIds),M(a.parsedFilms),$(a.parsedFilms)})),f.addEventListener("click",(()=>{y.disableBtn(),I(E),y.enableBtn()})),p.addEventListener("click",(()=>{localStorage.removeItem("films"),v.innerHTML="",F()})),s("2tESM"),s("hwTRf");
//# sourceMappingURL=my-lib-page.a8eb4826.js.map
